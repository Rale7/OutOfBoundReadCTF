<div class="passwords-container">
  <header class="header">
    <div class="header-content">
      <h1><i class="fas fa-key"></i> Moji Nalozi</h1>
      <button (click)="logout()" class="logout-button">Odjava</button>
    </div>
  </header>

  <div class="content">
    <div class="toolbar">
      <div class="search-box">
        <input
          type="text"
          [(ngModel)]="searchTerm"
          placeholder="Pretraži naloge po servisu ili korisniku..."
          class="search-input"
        />
      </div>
      <button (click)="search()" class="search-button"><i class="fas fa-search"></i></button>
      <button (click)="exportToFile()" class="export-button"><i class="fas fa-download"></i> Export to File</button>
      <button (click)="openImportModal()" class="import-button"><i class="fas fa-upload"></i> Import from Text</button>
    </div>

    <div class="accounts-grid">
      <div *ngIf="accounts.length === 0" class="no-accounts">
        <p>Nema naloga koji odgovaraju pretrazi</p>
      </div>

      <div *ngFor="let account of accounts" class="account-card" (click)="openDetailModal(account)">
        <div class="account-header">
          <h3 class="account-service">{{ account.service }}</h3>
          <span class="account-icon"><i class="fas fa-chevron-right"></i></span>
        </div>
        <p class="account-username">{{ account.username }}</p>
        <div class="account-footer">
          <span class="account-id">#{{ this.indexOf(account) }}</span>
        </div>
      </div>
    </div>
  </div>
</div>

<app-account-detail-modal
  *ngIf="showDetailModal"
  [account]="selectedAccount!"
  (close)="closeDetailModal()"
  (update)="onAccountUpdated($event)"
></app-account-detail-modal>

<!-- Import Modal -->
<div *ngIf="showImportModal" class="modal-overlay">
  <div class="modal">
    <div class="modal-header">
      <h2><i class="fas fa-upload"></i> Import podataka</h2>
      <button (click)="closeImportModal()" class="close-button">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="modal-body">
      <label for="importTextArea" class="textarea-label">Unesite tekst za import:</label>
      <textarea 
        id="importTextArea"
        [(ngModel)]="importText" 
        placeholder="Ovde unesite tekst koji želite da importujete..."
        class="import-textarea"
        rows="10">
      </textarea>
    </div>
    
    <div class="modal-footer">
      <button (click)="closeImportModal()" class="cancel-button">
        <i class="fas fa-times"></i> Otkaži
      </button>
      <button (click)="sendImportData()" class="send-button">
        <i class="fas fa-paper-plane"></i> Pošalji
      </button>
    </div>
  </div>
</div>
